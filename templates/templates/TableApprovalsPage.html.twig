<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Management System - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<!-- Header -->
<header class="text-white py-10 px-4 text-center shadow-lg bg-gray-700 rounded">
    <h1 class="text-5xl font-bold mb-2">Hotel Management Approvals Section</h1>
</header>

<!-- Navigation -->
<nav class="flex items-center bg-gray-600 text-white px-4 py-3 rounded shadow mt-6 mb-10 space-x-4">
    <a href="Administrator.php" class="hover:text-gray-200 font-medium">Administrator</a>
    <form action="logout.php" method="POST">
        <button type="submit" class="hover:text-gray-200 font-medium">Log out</button>
    </form>
</nav>


<div class="max-w-6xl mx-auto px-4">

    <!-- Display Messages -->
    {% if message %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
            {{ message }}
        </div>
    {% endif %}
    {% if error %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
            {{ error }}
        </div>
    {% endif %}

    <!-- Search Users -->
    <form method="GET" class="mb-6 flex space-x-2">
        <input type="text" name="search" placeholder="Search users by name or email"
               value="{{ search|default('') }}"
               class="border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-yellow-400">
        <button type="submit" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800">Search</button>
    </form>

    <!-- Users Table -->
    <div class="w-full border rounded-xl overflow-hidden shadow bg-white">

        <!-- Table Header -->
        <div class="hidden md:flex bg-gray-100 border-b text-gray-700 font-semibold text-sm">
            <div class="flex-1 px-4 py-3">First Name</div>
            <div class="w-40 px-4 py-3">Last Name</div>
            <div class="w-64 px-4 py-3 text-right">Email</div>
            <div class="w-32 px-4 py-3 text-center">Approved</div>
            <div class="w-40 px-4 py-3 text-right">Actions</div>
        </div>

        <!-- Rows -->
        <div class="divide-y">
            {% for user in users %}
            <div class="hidden md:flex items-center px-4 py-3 hover:bg-gray-50 transition">

                <div class="flex-1 text-sm text-gray-800">{{ user.first_name }}</div>
                <div class="w-40 text-sm text-gray-800">{{ user.last_name }}</div>
                <div class="w-64 text-sm text-gray-700 text-right truncate">{{ user.user_email }}</div>
                <div class="w-32 text-center">
                    {% if user.approved %}
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-700">Yes</span>
                    {% else %}
                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-700">No</span>
                    {% endif %}
                </div>

                <div class="w-40 text-right space-x-2 flex justify-end">
                    <!-- Approve / Deny -->
                    <form method="POST" action="Add_Read_Update_Delete_Approvals.php" class="inline-block">
                        <input type="hidden" name="approve" value="{{ user.user_email }}">
                        {% if user.approved %}
                            <button type="submit"
                                class="px-3 py-1.5 text-sm bg-red-600 text-white rounded-md hover:bg-red-700">
                                Deny
                            </button>
                        {% else %}
                            <button type="submit"
                                class="px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700">
                                Approve
                            </button>
                        {% endif %}
                    </form>
                </div>

            </div>
            {% else %}
            <div class="px-4 py-3 text-gray-500">No users found.</div>
            {% endfor %}
        </div>

    </div>

</div>

</body>
</html>
