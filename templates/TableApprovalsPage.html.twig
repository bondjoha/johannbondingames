<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Management System - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<header class="text-white py-10 mb-6 px-4 text-center shadow-lg"
        style="background: linear-gradient(90deg,#1e3c72,#2a5298);">
    <h1 class="text-5xl font-bold mb-2">Hotel Management</h1>
    <p class="text-xl">Welcome, {{ adminName }}</p>
</header>

{% set nav_links = [
    { 'href': 'Administrator.php', 'text': 'Home' },
    { 'href': 'logout.php', 'text': 'Log out' }
] %}

{% include 'navigationmenu.html.twig' with {'nav_links': nav_links, 'user': user} %}


<div class="max-w-6xl mx-auto px-4">
    <div class="w-full border rounded-xl overflow-hidden shadow bg-white">

        <!-- Header -->
        <div class="hidden md:flex bg-gray-100 border-b text-gray-700 font-semibold text-sm">
            <div class="flex-1 px-4 py-3">Name</div>
            <div class="w-40 px-4 py-3">Surname</div>
            <div class="w-64 px-4 py-3 text-right">Email Address</div>
            <div class="w-32 px-4 py-3 text-center">Approved</div>
            <div class="w-40 px-4 py-3 text-right">Actions</div>
        </div>

        <!-- Rows -->
        <div class="divide-y">
            {% for user in users %}
            <div class="hidden md:flex items-center px-4 py-3 hover:bg-gray-50 transition">

                <div class="flex-1 text-sm text-gray-800">{{ user.first_name }}</div>
                <div class="w-40 text-sm text-gray-800">{{ user.last_name }}</div>
                <div class="w-64 text-sm text-gray-700 text-right truncate">{{ user.user_email }}</div>
                <div class="w-32 text-center">
                    {% if user.approved %}
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-700">Yes</span>
                    {% else %}
                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-700">No</span>
                    {% endif %}
                </div>
               <div class="w-40 text-right space-x-2 flex justify-end">
                <!-- Approve / Deny -->
                <form method="POST" action="Add_Read_Update_Delete_Approvals.php" class="inline-block">
                    <input type="hidden" name="user_email" value="{{ user.user_email }}">
                    {% if user.approved %}
                        <button type="submit"
                            class="px-3 py-1.5 text-sm bg-red-600 text-white rounded-md hover:bg-red-700">
                            Deny
                        </button>
                    {% else %}
                        <button type="submit"
                            class="px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700">
                            Approve
                        </button>
                    {% endif %}
                </form>
            </div>

            </div>
            {% else %}
            <div class="px-4 py-3 text-gray-500">No users found.</div>
            {% endfor %}
        </div>

    </div>
</div>

</body>
</html>
